#!/usr/bin/env bash

if [ $# -eq 0 ]; then
	echo "Usage: $0 <command>"
	echo ""
	echo "Commands:"
	echo "  build    Build the project"
	echo "  test     Run tests"
	echo "  run      Run the project"
	echo "  clean    Clean build artifacts"
	exit 1
fi

COMMAND=$1
shift

case "$COMMAND" in
	build)
		zune bundle src/main.luau src/**/*.luau --out=truffle
		;;
	test)
		zune test tests/run-all.test.luau
		;;
	run)
		zune run src/main.luau "$@"
		;;
	clean)
		rm -rf truffle
		;;
	*)
		echo "Unknown command: $COMMAND"
		echo "Usage: $0 <build|test|run|clean>"
		exit 1
		;;
esac